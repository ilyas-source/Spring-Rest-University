<!DOCTYPE html>
<html lang='en'>
<head>
    <meta charset='utf-8'/>
    <link href='/university/sources/css/fullcalendar.min.css' rel='stylesheet'/>
    <script src='/university/sources/js/fullcalendar.min.js'></script>
    <link href="/university/sources/css/bootstrap.min.css" rel="stylesheet">
    <script src="/university/sources/js/bootstrap.bundle.min.js"></script>
    <script src="/university/sources/js/jquery.min.js"></script>
    <script th:inline="javascript">

        document.addEventListener('DOMContentLoaded', function() {
            var calendarEl = document.getElementById('calendar');
            var calendar = new FullCalendar.Calendar(calendarEl, {
                events: function (info, callback) {
                    $.get(
                        '/university/lectures/schedule/calendar',
                        function (calendar) {
                            let events = [];
                            calendar.forEach(function (lecture) {
                                let date=lecture.date;
                                let time=lecture.timeslot.beginTime;
                                let start=date[0]+'-';
                                if(date[1]<10) {
                                    start+="0";
                                }
                                start+=date[1];
                                if(date[1]<10) {
                                    start+="0";
                                }
                                start+='-';
                                if(date[2]<10) {
                                    start+="0";
                                }
                                start+=date[2]+"T";
                                if(time[0]<10) {
                                    start+="0";
                                }
                                start+=time[0]+":";
                                if(time[1]<10) {
                                    start+="0";
                                }
                                start+=time[1]+":00";
                                console.log(start);
                                events.push({
                                    id: lecture.id,
                                    title: lecture.subject.name,
                                    //  start: lecture.timeslot.beginTime,
                                  //  start: '2021-10-01T12:30:00',
                                    start: start,
                                    // start: '2021-10-01',
                                    // startTime: '12:30:00',
                                   // start: lecture.date+'T'+'12:30:00',
                                   //
                                });
                        //        alert(events);
                            });
                            callback(events);
                        });
                },
                //
                initialView: 'dayGridMonth'
            });
            calendar.render();
        });

    </script>

</head>
<body>
<header th:insert="fragments/header.html :: header"></header>

<div class="container mt-5">

    <div id='calendar'></div>

</div>
</body>
</html>